<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vòng Dâu Tằm An Nhiên</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
    </style>
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body class="bg-gray-50 font-sans" x-data="shop" x-cloak>

    <div class="container mx-auto p-4">

        <!-- Modal Thông Báo -->
        <div
            x-show="isAlertModalOpen"
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 transform translate-y-4 sm:translate-y-0 sm:scale-95"
            x-transition:enter-end="opacity-100 transform translate-y-0 sm:scale-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 transform translate-y-0 sm:scale-100"
            x-transition:leave-end="opacity-0 transform translate-y-4 sm:translate-y-0 sm:scale-95"
            class="fixed top-5 right-5 z-50 bg-white rounded-lg shadow-lg p-4 flex items-center space-x-3 max-w-sm border"
            :class="{ 'border-green-400': alertModalType === 'success', 'border-red-400': alertModalType === 'error' }"
            style="display: none;"
        >
            <!-- Success Icon -->
            <svg x-show="alertModalType === 'success'" class="h-8 w-8 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <!-- Error Icon -->
            <svg x-show="alertModalType === 'error'" style="display: none;" class="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <p class="text-gray-700 font-medium" x-text="alertModalMessage"></p>
        </div>

        <!-- Shop Profile Section - Only show on homepage -->
        <div x-show="!loading && !error && view === 'products'" class="bg-white rounded-2xl shadow-sm p-6 mb-8 border border-gray-100">
            <!-- Avatar and Basic Info -->
            <div class="flex flex-col items-center text-center mb-6">
                <div class="relative mb-4">
                    <img :src="shopInfo.avatar_image" :alt="shopInfo.shop_name"
                         class="w-24 h-24 rounded-full border-4 border-pink-200 shadow-md object-cover">
                    <div class="absolute -bottom-1 -right-1 bg-pink-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold">
                        ✓
                    </div>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 mb-1" x-text="shopInfo.shop_name"></h1>
                <p class="text-gray-500 text-sm mb-3" x-text="shopInfo.username"></p>
            </div>

            <!-- Stats Row -->
            <div class="flex justify-center space-x-8 mb-6">
                <div class="text-center">
                    <div class="text-xl font-bold text-gray-800" x-text="shopInfo.stats.products"></div>
                    <div class="text-xs text-gray-500">Sản phẩm</div>
                </div>
                <div class="text-center">
                    <div class="text-xl font-bold text-gray-800" x-text="shopInfo.stats.followers"></div>
                    <div class="text-xs text-gray-500">Follower</div>
                </div>
                <div class="text-center">
                    <div class="text-xl font-bold text-gray-800" x-text="shopInfo.stats.likes"></div>
                    <div class="text-xs text-gray-500">Thích</div>
                </div>
            </div>

            <!-- Description -->
            <div class="text-center mb-6">
                <p class="text-gray-700 text-sm leading-relaxed" x-text="shopInfo.description"></p>
            </div>

            <!-- Contact CTA -->
            <div class="flex flex-col sm:flex-row gap-3 justify-center">
                <a :href="'tel:' + shopInfo.zalo_phone"
                   class="bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-full font-medium text-center transition-colors duration-200 flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                    <span x-text="shopInfo.zalo_phone"></span>
                </a>
                <button class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-full font-medium transition-colors duration-200 flex items-center justify-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
                    </svg>
                    Chat Zalo
                </button>
            </div>
        </div>

        <!-- Loading State -->
        <div x-show="loading" class="text-center py-12">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"></div>
            <p class="text-gray-600">Đang tải dữ liệu...</p>
        </div>

        <!-- Error State -->
        <div x-show="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6">
            <p x-text="error"></p>
        </div>

        <!-- Floating Action Buttons -->
        <div class="fixed bottom-5 right-5 z-40 flex flex-col items-center space-y-3">
            <!-- Zalo Icon -->
            <a href="https://zalo.me/0972483892" target="_blank" rel="noopener noreferrer" class="block transform hover:scale-110 transition-transform">
                <div class="bg-blue-500 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16.25,10.25H14.38V8.38a.5.5,0,0,0-.5-.5H12.38a.5.5,0,0,0-.5.5v1.87H10.38a.5.5,0,0,0-.5.5v1.5a.5.5,0,0,0,.5.5h1.5v3.25a.5.5,0,0,0,.5.5h1.5a.5.5,0,0,0,.5-.5V12.75h1.87a.5.5,0,0,0,.5-.5v-1.5A.5.5,0,0,0,16.25,10.25ZM12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"/>
                    </svg>
                </div>
            </a>

            <!-- Cart Icon -->
            <div @click="view = 'cart'" class="relative bg-pink-600 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-lg cursor-pointer transform hover:scale-110 transition-transform">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
                <span x-show="cart.length > 0" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs w-6 h-6 rounded-full flex items-center justify-center" x-text="cart.length"></span>
            </div>
        </div>


        <main>
            <!-- Products View -->
            <div x-show="!loading && !error && view === 'products'" x-transition.opacity>

                <h2 class="text-2xl font-bold text-center text-gray-800 mb-4">Danh mục sản phẩm</h2>

                <!-- Category Filters -->
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-8">
                    <template x-for="category in categories" :key="category.id">
                        <div @click="selectCategory(category)"
                             class="flex items-center bg-white rounded-lg shadow-sm overflow-hidden cursor-pointer border transition-all duration-200"
                             :class="{ 'border-pink-500 shadow-md': currentCategory.id === category.id, 'border-gray-200 hover:border-pink-300 hover:shadow-md': currentCategory.id !== category.id }">
                            <img :src="category.image || './assets/images/demo.jpg'" :alt="category.name" class="w-16 h-16 object-cover flex-shrink-0">
                            <div class="p-3 flex-grow">
                                <h4 class="font-semibold text-sm text-gray-800 leading-tight" x-text="category.name"></h4>
                                <div class="flex items-center space-x-2 text-xs text-gray-500 mt-1">
                                    <span>
                                        <span x-text="category.id === 'all' ? products.length : getProductCount(category.id)"></span> SP
                                    </span>
                                    <span class="text-gray-300">|</span>
                                    <span class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-0.5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.934l.643 2.113a1 1 0 01-.814 1.259l-2.113-.643a1 1 0 00-.934.822c-.276.587-.558.915-.934 1.45a1 1 0 00.386 1.45l2.113.643a1 1 0 01-.643 2.113l-1.259-.814a1 1 0 00-1.259.814l-.643 2.113a1 1 0 00.822.934c.587.276.915.558 1.45.934a1 1 0 001.45-.385c.345-.23.614-.558.822-.934l-.643-2.113a1 1 0 01.814-1.259l2.113.643a1 1 0 00.934-.822c.276-.587.558-.915.934-1.45a1 1 0 00-.386-1.45l-2.113-.643a1 1 0 01.643-2.113l1.259.814a1 1 0 001.259-.814l.643-2.113a1 1 0 00-.822-.934c-.587-.276-.915-.558-1.45-.934zM7 12a1 1 0 11-2 0 1 1 0 012 0zm3 3a1 1 0 11-2 0 1 1 0 012 0zm2-5a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
                                        </svg>
                                        <span x-text="getCategoryPurchases(category.id)"></span>+
                                    </span>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>

                <h2 class="text-3xl font-bold text-center text-gray-800 mb-2" x-text="currentCategory?.name"></h2>
                <p class="text-center text-gray-500 mb-8" x-text="currentCategory?.description"></p>

                <!-- Sorting Filters -->
                <div class="flex items-center justify-center flex-wrap gap-2 mb-8 border-b pb-8">
                     <button @click="activeFilter = 'best_selling'"
                            :class="{ 'bg-pink-200 text-pink-800': activeFilter === 'best_selling', 'bg-white text-gray-600': activeFilter !== 'best_selling' }"
                            class="px-3 py-1.5 rounded-full text-xs font-medium transition-colors duration-200">
                        🔥 Bán chạy
                    </button>
                    <button @click="activeFilter = 'newest'"
                            :class="{ 'bg-pink-200 text-pink-800': activeFilter === 'newest', 'bg-white text-gray-600': activeFilter !== 'newest' }"
                            class="px-3 py-1.5 rounded-full text-xs font-medium transition-colors duration-200">
                        ✨ Hàng mới
                    </button>
                    <button @click="activeFilter = 'top_rated'"
                            :class="{ 'bg-pink-200 text-pink-800': activeFilter === 'top_rated', 'bg-white text-gray-600': activeFilter !== 'top_rated' }"
                            class="px-3 py-1.5 rounded-full text-xs font-medium transition-colors duration-200">
                        ⭐ Đánh giá cao
                    </button>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6">
                    <template x-for="product in filteredProducts()" :key="product.id">
                        <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                            <div class="relative">
                                <img :src="product.image" :alt="product.name" class="w-full aspect-square object-cover">
                                <div @click="openImageModal(product.image)" class="absolute inset-0 cursor-pointer">
                                    <div class="absolute bottom-2 right-2 bg-black bg-opacity-50 text-white p-1.5 rounded-full">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                                            <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div class="p-4">
                                <h3 class="font-semibold text-gray-800 truncate" x-text="product.name"></h3>
                                <!-- Price, Rating, and Purchases -->
                                <div class="mt-2 space-y-2">
                                    <div class="flex items-baseline">
                                        <span class="text-pink-600 font-bold text-lg" x-text="formatCurrency(product.price)"></span>
                                        <template x-if="product.original_price">
                                            <span class="text-gray-400 line-through text-xs ml-2" x-text="formatCurrency(product.original_price)"></span>
                                        </template>
                                    </div>
                                    <div class="flex items-center text-xs text-gray-500">
                                        <div class="flex items-center">
                                            <template x-for="star in [1, 2, 3, 4, 5]" :key="star">
                                                <svg class="w-3.5 h-3.5" :class="star <= product.rating ? 'text-yellow-400' : 'text-gray-300'" fill="currentColor" viewBox="0 0 20 20">
                                                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                                </svg>
                                            </template>
                                        </div>
                                        <div class="border-l h-3.5 mx-2 border-gray-300"></div>
                                        <span x-text="`Đã bán ${product.purchases}+`"></span>
                                    </div>
                                </div>
                                <!-- Action Buttons -->
                                <div class="mt-4 flex items-center space-x-2">
                                    <button @click="addToCart(product)" class="flex-shrink-0 bg-pink-100 text-pink-700 h-10 w-10 rounded-lg hover:bg-pink-200 transition-colors duration-300 flex items-center justify-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"></path>
                                        </svg>
                                    </button>
                                    <button @click="buyNow(product)" class="w-full bg-pink-600 text-white h-10 rounded-lg hover:bg-pink-700 transition-colors duration-300 font-semibold text-sm">
                                        Mua ngay
                                    </button>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>

                <!-- Nút Xem Thêm -->
                <div x-show="canLoadMore()" class="text-center mt-10">
                    <button @click="loadMoreProducts()"
                            class="bg-white hover:bg-pink-50 text-pink-600 font-semibold py-3 px-8 border border-pink-200 rounded-full shadow-sm transition-all duration-300 transform hover:scale-105">
                        Xem thêm sản phẩm
                    </button>
                </div>
            </div>

            <!-- Cart View -->
            <div x-show="view === 'cart'" x-transition.opacity style="display: none;">
                <!-- Header -->
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-3xl font-bold text-gray-800">Giỏ Hàng Của Bạn</h2>
                    <button @click="backToCategories()" class="text-pink-600 hover:text-pink-800 font-semibold flex items-center text-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        Tiếp tục mua sắm
                    </button>
                </div>

                <!-- Empty Cart Message -->
                <div x-show="cart.length === 0" class="text-center text-gray-500 py-16 bg-white rounded-lg shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    <p class="mt-4 text-lg">Giỏ hàng của bạn đang trống.</p>
                    <button @click="view = 'products'" class="mt-6 bg-pink-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-pink-700 transition-colors">Bắt đầu mua sắm</button>
                </div>

                <!-- Cart Content -->
                <div x-show="cart.length > 0" class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
                    <!-- Left Column: Cart Items & Shipping Form -->
                    <div class="lg:col-span-2 space-y-6">
                        <!-- Cart Items Card -->
                        <div class="bg-white p-6 rounded-lg shadow-sm">
                            <h3 class="text-xl font-semibold mb-4 pb-4">Sản phẩm trong giỏ (<span x-text="cart.length"></span>)</h3>
                            <div class="space-y-4 divide-y">
                                <template x-for="item in cart" :key="item.id">
                                    <div class="bg-white rounded-xl shadow-md p-4 mb-4">
                                        <div class="flex space-x-4">
                                            <!-- Product Image -->
                                            <div class="w-24 h-24 md:w-28 md:h-28 flex-shrink-0">
                                                <img :src="item.image" :alt="item.name" class="w-full h-full object-cover rounded-lg">
                                            </div>

                                            <!-- Product Details -->
                                            <div class="flex-grow flex flex-col justify-between">
                                                <div>
                                                    <div class="flex justify-between items-start">
                                                        <h4 class="font-bold text-gray-900 text-base" x-text="item.name"></h4>
                                                        <button @click="removeFromCart(item.id)" class="text-gray-400 hover:text-red-500 -mt-1 -mr-1">
                                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                                            </svg>
                                                        </button>
                                                    </div>
                                                    <p class="text-sm text-gray-500 mt-1" x-text="formatCurrency(item.price)"></p>
                                                </div>

                                                <div class="flex justify-between items-center mt-3">
                                                    <!-- Quantity Selector -->
                                                    <div class="flex items-center border border-gray-200 rounded-full">
                                                        <button @click="decreaseQuantity(item.id)" class="px-3 py-1 text-lg text-gray-500 hover:bg-gray-50 rounded-l-full">-</button>
                                                        <span class="px-4 text-sm font-semibold" x-text="item.quantity"></span>
                                                        <button @click="increaseQuantity(item.id)" class="px-3 py-1 text-lg text-gray-500 hover:bg-gray-50 rounded-r-full">+</button>
                                                    </div>
                                                    <!-- Total Price -->
                                                    <p class="font-bold text-pink-600 text-lg" x-text="formatCurrency(item.price * item.quantity)"></p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Ghi chú -->
                                        <div class="mt-4">
                                            <label :for="'weight-' + item.id" class="text-sm font-medium text-gray-600 mb-1 block">Cân nặng/ghi chú</label>
                                            <input type="text" :id="'weight-' + item.id" x-model="item.weight" placeholder="Thêm ghi chú..." class="block w-full border-gray-200 rounded-md shadow-sm focus:ring-0 focus:border-gray-200 focus:outline-none text-sm h-9 placeholder-gray-400">
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        <!-- Shipping Info Card -->
                        <div class="bg-white p-6 rounded-lg shadow-sm">
                            <h3 class="text-xl font-semibold mb-6">Thông tin nhận hàng</h3>
                            <form id="shipping-form" @submit.prevent="validateAndShowConfirmModal()" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5">
                                    <div>
                                        <label for="fullName" class="block text-sm font-medium text-gray-700">Họ và tên</label>
                                        <div class="mt-1">
                                            <input type="text" x-model="customer.name" id="fullName" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500" required>
                                        </div>
                                    </div>
                                    <div>
                                        <label for="phone" class="block text-sm font-medium text-gray-700">Số điện thoại</label>
                                        <div class="mt-1">
                                            <input type="tel" x-model="customer.phone" id="phone" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500" required pattern="(0[35789])+([0-9]{8})\b" title="Vui lòng nhập số điện thoại hợp lệ (10 số)." oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                                        </div>
                                    </div>
                                </div>

                                <div class="space-y-5">
                                    <div>
                                        <label for="province" class="block text-sm font-medium text-gray-700">Tỉnh/Thành phố</label>
                                        <select id="province" x-model="selectedProvince" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500" required>
                                            <option value="">-- Chọn Tỉnh/Thành phố --</option>
                                            <template x-for="province in provinces" :key="province.Id">
                                                <option :value="province.Id" x-text="province.Name"></option>
                                            </template>
                                        </select>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5">
                                        <div>
                                            <label for="district" class="block text-sm font-medium text-gray-700">Quận/Huyện</label>
                                            <select id="district" x-model="selectedDistrict" :disabled="!selectedProvince" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500 disabled:bg-gray-100" required>
                                                <option value="">-- Chọn Quận/Huyện --</option>
                                                <template x-for="district in districts" :key="district.Id">
                                                    <option :value="district.Id" x-text="district.Name"></option>
                                                </template>
                                            </select>
                                        </div>
                                        <div>
                                            <label for="ward" class="block text-sm font-medium text-gray-700">Phường/Xã</label>
                                            <select id="ward" x-model="selectedWard" :disabled="!selectedDistrict" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500 disabled:bg-gray-100" required>
                                                <option value="">-- Chọn Phường/Xã --</option>
                                                <template x-for="ward in wards" :key="ward.Id">
                                                    <option :value="ward.Id" x-text="ward.Name"></option>
                                                </template>
                                            </select>
                                        </div>
                                    </div>
                                    <div>
                                        <label for="streetAddress" class="block text-sm font-medium text-gray-700">Số nhà, tên đường</label>
                                        <div class="mt-1">
                                            <input type="text" x-model="streetAddress" id="streetAddress" placeholder="Ví dụ: 123 Đường ABC" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500" required>
                                        </div>
                                    </div>
                                    <input type="hidden" x-model="customer.address">
                                </div>

                                <div>
                                    <label for="notes" class="block text-sm font-medium text-gray-700">Ghi chú (tùy chọn)</label>
                                    <div class="mt-1">
                                        <textarea x-model="customer.notes" id="notes" rows="3" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-pink-500 focus:border-pink-500"></textarea>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Right Column: Order Summary (Sticky) -->
                    <div class="lg:col-span-1 lg:sticky lg:top-8 space-y-6">
                        <!-- Coupon Code Input - First -->
                        <div class="bg-white p-6 rounded-lg shadow-sm">
                            <h3 class="text-xl font-semibold mb-4">Mã khuyến mãi</h3>
                            <div class="flex space-x-2">
                                <input type="text" x-model="discountCode" placeholder="Nhập mã của bạn"
                                       class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-0 focus:border-gray-300 focus:outline-none text-sm">
                                <button @click="applyDiscount()" class="bg-gray-800 text-white font-semibold px-5 py-2 rounded-md hover:bg-gray-900 transition-colors text-sm whitespace-nowrap">
                                    Áp dụng
                                </button>
                            </div>
                            <p x-show="discountError" x-text="discountError" class="text-red-500 text-sm mt-2"></p>
                            <p x-show="appliedDiscountCode && !discountError" class="text-green-600 text-sm mt-2">✓ Áp dụng mã thành công!</p>
                        </div>
                        <!-- Order Summary - Second -->
                        <div class="bg-white p-6 rounded-lg shadow-sm">
                            <h3 class="text-xl font-semibold mb-4 border-b pb-4">Tóm tắt đơn hàng</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between text-gray-600">
                                    <span>Tạm tính</span>
                                    <span x-text="formatCurrency(cartSubtotal())"></span>
                                </div>
                                <div class="flex justify-between text-gray-600">
                                    <span>Phí vận chuyển</span>
                                    <span x-text="shippingFee() === 0 ? (freeShipping ? 'Miễn phí (FREESHIP)' : 'Miễn phí') : formatCurrency(shippingFee())"></span>
                                </div>
                                <template x-if="discountAmount > 0">
                                    <div class="flex justify-between text-green-600 font-medium">
                                        <span>Giảm giá (<span class="font-semibold" x-text="appliedDiscountCode"></span>)</span>
                                        <span x-text="'-' + formatCurrency(discountAmount)"></span>
                                    </div>
                                </template>
                                <div class="flex justify-between font-bold text-lg border-t pt-3 mt-3">
                                    <span>Tổng cộng</span>
                                    <span x-text="formatCurrency(cartTotal())"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Method -->
                        <div class="bg-white p-6 rounded-lg shadow-sm">
                            <h3 class="text-xl font-semibold mb-4">Phương thức thanh toán</h3>
                            <div class="space-y-3">
                                <label class="flex items-center p-3 border rounded-lg cursor-pointer transition-all" :class="{ 'bg-pink-50 border-pink-500': paymentMethod === 'cod' }">
                                    <input type="radio" x-model="paymentMethod" value="cod" name="paymentMethod" class="h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300">
                                    <span class="ml-3 text-sm font-medium text-gray-700">Thanh toán khi nhận hàng (COD)</span>
                                </label>
                                <label class="flex items-center p-3 border rounded-lg cursor-pointer transition-all" :class="{ 'bg-pink-50 border-pink-500': paymentMethod === 'bank_transfer' }">
                                    <input type="radio" x-model="paymentMethod" value="bank_transfer" name="paymentMethod" class="h-4 w-4 text-pink-600 focus:ring-pink-500 border-gray-300">
                                    <span class="ml-3 text-sm font-medium text-gray-700">Chuyển khoản ngân hàng</span>
                                </label>
                            </div>
                        </div>
                        <!-- Checkout Button - Last -->
                        <div class="pt-2">
                            <button type="submit" form="shipping-form" :disabled="isSubmitting" class="w-full bg-pink-600 text-white font-semibold text-lg py-3 px-4 rounded-lg hover:bg-pink-700 transition-colors duration-300 flex items-center justify-center shadow-lg hover:shadow-xl" :class="{ 'opacity-50 cursor-not-allowed': isSubmitting }">
                                <svg x-show="isSubmitting" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" style="display: none;">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                <span x-show="isSubmitting" style="display: none;">Đang xử lý...</span>
                                <span x-show="!isSubmitting">Hoàn tất đơn hàng</span>
                            </button>
                        </div>
                    </div>

        <!-- Order Confirmation Modal -->
        <div x-show="isConfirmModalOpen" @keydown.escape.window="isConfirmModalOpen = false" class="fixed inset-0 bg-gray-800 bg-opacity-75 backdrop-blur-sm flex items-center justify-center p-4 z-50" style="display: none;" x-transition.opacity>
            <div @click.outside="isConfirmModalOpen = false" class="bg-white rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
                <div class="p-6 border-b">
                    <h2 class="text-2xl font-bold text-gray-800">Xác nhận thông tin đơn hàng</h2>
                    <p class="text-base font-semibold text-red-600 mt-1">Vui lòng kiểm tra thật kĩ thông tin một lần nữa!</p>
                </div>
                <div class="p-6 space-y-6 overflow-y-auto">
                    <!-- Customer Info -->
                    <div class="bg-slate-50 p-4 rounded-lg border">
                        <h3 class="font-semibold text-lg text-gray-800 mb-3">Thông tin người nhận</h3>
                        <div class="grid grid-cols-[max-content,1fr] gap-x-4 gap-y-3 text-base">
                            <span class="text-gray-500">Họ tên:</span>
                            <strong class="text-gray-900 text-left font-semibold" x-text="customer.name"></strong>

                            <span class="text-gray-500">Số điện thoại:</span>
                            <strong class="text-gray-900 text-left font-semibold" x-text="customer.phone"></strong>

                            <span class="text-gray-500 self-start">Địa chỉ:</span>
                            <strong class="text-gray-900 text-left font-semibold" x-text="customer.address"></strong>

                            <template x-if="customer.notes">
                                <div class="col-span-2 grid grid-cols-[max-content,1fr] gap-x-4">
                                    <span class="text-gray-500 self-start">Ghi chú:</span>
                                    <strong class="text-gray-900 text-left font-semibold" x-text="customer.notes"></strong>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- Cart Items -->
                    <div>
                        <h3 class="font-semibold text-lg text-gray-700 mb-3 border-b pb-2">Sản phẩm đã chọn</h3>
                        <div class="space-y-4">
                            <template x-for="item in cart" :key="item.id">
                                <div class="flex items-start space-x-4">
                                    <img :src="item.image" class="w-16 h-16 rounded-lg object-cover border">
                                    <div class="flex-grow">
                                        <p class="font-semibold text-gray-800" x-text="item.name"></p>
                                        <p class="text-sm text-gray-500" x-text="`Số lượng: ${item.quantity}`"></p>
                                        <p class="text-sm text-gray-500" x-show="item.weight" x-text="`Cân nặng/Ghi chú SP: ${item.weight}`"></p>
                                    </div>
                                    <p class="font-semibold text-pink-600" x-text="formatCurrency(item.price * item.quantity)"></p>
                                </div>
                            </template>
                        </div>
                    </div>

                    <!-- Order Summary -->
                    <div>
                        <h3 class="font-semibold text-lg text-gray-700 mb-3 border-b pb-2">Tổng kết</h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between"><span>Tạm tính:</span> <span x-text="formatCurrency(cartSubtotal())"></span></div>
                            <div class="flex justify-between"><span>Phí vận chuyển:</span> <span x-text="shippingFee() === 0 ? 'Miễn phí' : formatCurrency(shippingFee())"></span></div>
                            <template x-if="discountAmount > 0">
                                <div class="flex justify-between text-green-600">
                                    <span>Giảm giá (<span x-text="appliedDiscountCode"></span>):</span>
                                    <span x-text="'-' + formatCurrency(discountAmount)"></span>
                                </div>
                            </template>
                            <div class="flex justify-between font-bold text-base pt-2 border-t">
                                <span>Tổng cộng:</span>
                                <span x-text="formatCurrency(cartTotal())"></span>
                            </div>
                        </div>
                    </div>
                     <!-- Payment Method -->
                    <div>
                        <h3 class="font-semibold text-lg text-gray-700 mb-3 border-b pb-2">Thanh toán</h3>
                        <p class="text-sm" x-text="paymentMethod === 'cod' ? 'Thanh toán khi nhận hàng (COD)' : 'Chuyển khoản ngân hàng'"></p>
                    </div>
                </div>
                <div class="p-6 bg-gray-50 border-t rounded-b-2xl flex flex-col sm:flex-row-reverse gap-3">
                    <button @click="confirmAndSubmitOrder()" :disabled="isSubmitting" class="w-full sm:w-auto bg-pink-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-pink-700 transition-colors flex items-center justify-center" :class="{ 'opacity-50 cursor-not-allowed': isSubmitting }">
                        <svg x-show="isSubmitting" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" style="display: none;"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                        <span x-show="isSubmitting" style="display: none;">Đang xử lý...</span>
                        <span x-show="!isSubmitting">Xác nhận đặt hàng</span>
                    </button>
                    <button @click="isConfirmModalOpen = false" class="w-full sm:w-auto bg-white text-gray-700 font-semibold py-3 px-6 rounded-lg hover:bg-gray-100 transition-colors border">
                        Sửa lại thông tin
                    </button>
                </div>
            </div>
        </div>

        <!-- Order Success Modal -->
        <div x-show="isSuccessModalOpen"
             class="fixed inset-0 bg-gray-900 bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]"
             style="display: none;"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0">
            <div @click.outside="closeSuccessModal()"
                 class="bg-white rounded-2xl shadow-2xl w-full max-w-md text-center p-8 transform transition-all"
                 x-show="isSuccessModalOpen"
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100"
                 x-transition:leave="transition ease-in duration-200"
                 x-transition:leave-start="opacity-100 scale-100"
                 x-transition:leave-end="opacity-0 scale-95">

                <div class="mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-green-100 mb-6">
                    <svg class="h-16 w-16 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>

                <h2 class="text-3xl font-bold text-gray-800 mb-3">Đặt hàng thành công!</h2>
                <p class="text-gray-600 mb-4">Cảm ơn bạn đã tin tưởng và đặt hàng các sản phẩm về dâu tằm của em làm. Em sẽ gọi điện xác nhận lại đơn hàng sau vài giờ nữa ạ.</p>
                <div class="bg-pink-50 border border-pink-200 rounded-lg px-4 py-3 mb-8">
                    <p class="text-sm text-gray-600">Mã đơn hàng của bạn là:</p>
                    <p class="text-2xl font-bold text-pink-600 tracking-wider" x-text="lastOrderId"></p>
                </div>

                <div class="bg-gray-50 rounded-lg p-4 text-left space-y-3 mb-8">
                    <div class="flex items-start">
                        <svg class="h-5 w-5 text-pink-500 mr-3 mt-1 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.414-1.414L11 7.586V6z" clip-rule="evenodd" />
                        </svg>
                        <p class="text-gray-700">Thời gian giao hàng dự kiến là <strong>3 đến 5 ngày</strong> kể từ thời điểm đặt hàng.</p>
                    </div>
                    <div class="flex items-start">
                        <svg class="h-5 w-5 text-blue-500 mr-3 mt-1 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                             <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                        </svg>
                        <p class="text-gray-700">Nếu có bất kỳ thắc mắc gì, vui lòng liên hệ Zalo: <strong class="text-blue-600">0972.483.892</strong> (Ánh Vòng Dâu Tằm).</p>
                    </div>
                </div>

                <button @click="closeSuccessModal()" class="w-full bg-pink-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-pink-700 transition-colors duration-300 shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-opacity-50">
                    Tiếp tục mua sắm
                </button>
            </div>
        </div>

        <!-- Bank Transfer Info Modal -->
        <div x-show="isBankTransferModalOpen"
             class="fixed inset-0 bg-gray-900 bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]"
             style="display: none;"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-100"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-100"
             x-transition:leave-end="opacity-0">
            <div @click.outside="closeBankTransferModal()"
                 class="bg-white rounded-2xl shadow-2xl w-full max-w-md text-center p-8 transform transition-all"
                 x-show="isBankTransferModalOpen"
                 x-transition:enter="transition ease-out duration-300"
                 x-transition:enter-start="opacity-0 scale-95"
                 x-transition:enter-end="opacity-100 scale-100"
                 x-transition:leave="transition ease-in duration-200"
                 x-transition:leave-start="opacity-100 scale-100"
                 x-transition:leave-end="opacity-0 scale-95">

                <h2 class="text-2xl font-bold text-gray-800 mb-2">Quét mã QR để thanh toán</h2>
                <div class="px-4">
                    <img src="./assets/images/qrcode.jpeg" alt="Mã QR thanh toán" class="w-full max-w-[250px] h-auto mx-auto rounded-lg shadow-md border">
                </div>

                <div class="bg-red-50 border-l-4 border-red-500 text-red-800 p-4 my-6 text-left">
                    <p class="font-bold">Nội dung chuyển khoản:</p>
                    <div class="flex justify-between items-center mt-1">
                        <p class="text-xl font-mono tracking-widest" x-text="lastOrderId"></p>
                        <button @click="navigator.clipboard.writeText(lastOrderId); showAlert('Đã sao chép mã đơn hàng!')" class="bg-red-100 text-red-800 text-xs font-semibold px-2 py-1 rounded-md hover:bg-red-200">SAO CHÉP</button>
                    </div>
                </div>

                <div class="text-left text-sm space-y-2 text-gray-600">
                    <p><strong>Ngân hàng:</strong> TECHCOMBANK</p>
                    <p><strong>Chủ tài khoản:</strong> LE THI ANH</p>
                    <p><strong>Số tài khoản:</strong> 0972483892</p>
                </div>

                <p class="text-xs text-green-500 mt-8">Sau khi chuyển khoản thành công, hãy bấm "Xác nhận đã chuyển khoản".</p>
                <button @click="closeBankTransferModal()" class="mt-2 w-full bg-pink-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-pink-700 transition-colors duration-300 shadow-lg focus:outline-none">
                    Xác nhận đã chuyển khoản
                </button>
            </div>
        </div>

        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-pink-50 to-purple-50 border-t border-pink-100 mt-16 w-full" x-show="!loading">
        <div class="max-w-7xl mx-auto px-4 py-12">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Brand Section -->
                    <div class="text-center md:text-left">
                        <div class="flex items-center justify-center md:justify-start mb-4">
                            <div class="bg-gradient-to-r from-pink-500 to-purple-500 text-white w-12 h-12 rounded-full flex items-center justify-center mr-3">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-bold text-gray-800">Vòng Dâu Tằm By Ánh</h3>
                        </div>
                        <p class="text-gray-600 text-sm leading-relaxed mb-4">
                            Chuyên cung cấp các sản phẩm vòng dâu tằm chất lượng cao,
                            mang lại sức khỏe và may mắn cho bạn và gia đình.
                        </p>
                        <div class="flex justify-center md:justify-start space-x-4">
                            <a href="https://zalo.me/0972483892" target="_blank" rel="noopener noreferrer"
                               class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full transition-colors duration-200">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M16.25,10.25H14.38V8.38a.5.5,0,0,0-.5-.5H12.38a.5.5,0,0,0-.5.5v1.87H10.38a.5.5,0,0,0-.5.5v1.5a.5.5,0,0,0,.5.5h1.5v3.25a.5.5,0,0,0,.5.5h1.5a.5.5,0,0,0,.5-.5V12.75h1.87a.5.5,0,0,0,.5-.5v-1.5A.5.5,0,0,0,16.25,10.25ZM12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm0,18a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z"/>
                                </svg>
                            </a>
                            <a href="tel:0972483892"
                               class="bg-green-500 hover:bg-green-600 text-white p-2 rounded-full transition-colors duration-200">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                </svg>
                            </a>
                        </div>
                    </div>

                    <!-- Contact Info -->
                    <div class="text-center md:text-left">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Thông tin liên hệ</h4>
                        <div class="space-y-3">
                            <div class="flex items-start justify-center md:justify-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-pink-500 mr-3 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                <div>
                                    <p class="text-gray-600 text-sm leading-relaxed">
                                        Xóm 4, Đông Cao<br>
                                        Tráng Việt, Hà Nội
                                    </p>
                                </div>
                            </div>
                            <div class="flex items-center justify-center md:justify-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-pink-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                </svg>
                                <p class="text-gray-600 text-sm">0972.483.892</p>
                            </div>
                            <div class="flex items-center justify-center md:justify-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-pink-500 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                <p class="text-gray-600 text-sm">Thứ 2 - Chủ nhật: 8:00 - 22:00</p>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Links -->
                    <div class="text-center md:text-left">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Dịch vụ</h4>
                        <div class="space-y-2">
                            <div class="flex items-center justify-center md:justify-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-pink-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <p class="text-gray-600 text-sm">Vòng dâu tằm chính hãng</p>
                            </div>
                            <div class="flex items-center justify-center md:justify-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-pink-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <p class="text-gray-600 text-sm">Giao hàng toàn quốc</p>
                            </div>
                            <div class="flex items-center justify-center md:justify-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-pink-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <p class="text-gray-600 text-sm">Tư vấn miễn phí</p>
                            </div>
                            <div class="flex items-center justify-center md:justify-start">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-pink-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                </svg>
                                <p class="text-gray-600 text-sm">Đổi trả trong 7 ngày</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom Section -->
                <div class="border-t border-pink-200 mt-8 pt-6">
                    <div class="flex flex-col md:flex-row justify-between items-center">
                        <p class="text-gray-500 text-sm text-center md:text-left mb-4 md:mb-0">
                            © 2024 Vòng Dâu Tằm By Ánh. Tất cả quyền được bảo lưu.
                        </p>
                        <div class="flex items-center space-x-4">
                            <span class="text-gray-400 text-xs">Được thiết kế với</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-red-500" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
                            </svg>
                            <span class="text-gray-400 text-xs">tại Việt Nam</span>
                        </div>
                    </div>
                </div>
            </div>
    </footer>

    <div class="container mx-auto p-4" x-data="shop" x-cloak>
        <!-- Image Viewer Modal -->

        <!-- Social Proof Notification -->
        <div x-show="notification.visible"
             x-transition:enter="transition ease-out duration-300 transform"
             x-transition:enter-start="translate-y-10 opacity-0"
             x-transition:enter-end="translate-y-0 opacity-100"
             x-transition:leave="transition ease-in duration-300 transform"
             x-transition:leave-start="translate-y-0 opacity-100"
             x-transition:leave-end="translate-y-10 opacity-0"
             class="fixed bottom-5 left-5 bg-white rounded-xl shadow-lg p-4 flex items-center space-x-3 z-50 border max-w-xs"
             style="display: none;">
            <div class="bg-pink-100 text-pink-600 p-2 rounded-full">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10 2a6 6 0 00-6 6v3.586l-1.707 1.707A1 1 0 003 15h14a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z" />
                </svg>
            </div>
            <p class="text-sm text-gray-700 font-medium" x-text="notification.message"></p>
        </div>

        <div x-show="isImageModalOpen" @keydown.escape.window="closeImageModal()" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 z-50" style="display: none;" x-transition>
            <div @click.outside="closeImageModal()" class="relative">
                <img :src="currentImage" alt="Xem ảnh lớn" class="max-w-full max-h-[90vh] rounded-lg shadow-lg">
                <button @click="closeImageModal()" class="absolute -top-4 -right-4 bg-white text-black w-10 h-10 rounded-full flex items-center justify-center shadow-lg hover:bg-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script src="./assets/js/app.js"></script>
</body>



</html>
